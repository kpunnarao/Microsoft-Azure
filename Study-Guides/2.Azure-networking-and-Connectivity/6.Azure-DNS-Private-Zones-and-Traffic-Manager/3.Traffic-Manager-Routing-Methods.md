# Traffic Manager Routing Methods (Priority, Weighted, Performance and Geographic):

Azure Traffic Manager uses **traffic-routing methods** to determine which endpoint to return in response to a DNS query. 

These methods allow you to control how users are directed to your application endpoints based on various criteria, optimizing for availability, performance, or specific business rules.

Here are the main traffic-routing methods:

---

## 1. Priority Routing Method üö¶

* **How it works**: This is the **failover routing method**. You assign a priority (an integer, typically 1 to 1000) to each endpoint in your Traffic Manager profile. Traffic Manager directs all requests to the endpoint with the **highest priority** (lowest number, e.g., 1). If that endpoint becomes unhealthy or unavailable (as detected by health probes), Traffic Manager automatically fails over to the next highest priority healthy endpoint.
* **Use Cases**:
    * **Disaster Recovery (DR)**: Setting up an active-passive configuration where a primary site handles all traffic, and a secondary site acts as a warm or cold standby, ready to take over if the primary fails.
    * **Planned Maintenance**: Temporarily directing all traffic away from a primary endpoint for updates or maintenance by manually lowering its priority or disabling it.
* **Benefit**: Simple to configure for high availability and straightforward failover scenarios.

---

## 2. Weighted Routing Method ‚öñÔ∏è

* **How it works**: You assign a **weight** (an integer from 1 to 1000) to each endpoint. Traffic Manager then distributes incoming DNS queries among the active endpoints based on these weights. Endpoints with higher weights receive a proportionally larger share of traffic. If all weights are equal, traffic is distributed roughly evenly.
* **Use Cases**:
    * **A/B Testing**: Directing a small percentage of users to a new version of an application (e.g., 10% to "New App," 90% to "Old App") to gather feedback before a full rollout.
    * **Gradual Rollouts**: Slowly shifting traffic to a new version or region by gradually increasing its weight.
    * **Load Distribution**: Distributing traffic across endpoints that might have different capacities.
    * **Cloud Bursting**: Routing excess traffic to cloud-based resources during peak periods while a primary on-premises system handles baseline load.
* **Benefit**: Provides granular control over traffic distribution for various deployment strategies.

---

## 3. Performance Routing Method ‚ö°

* **How it works**: Traffic Manager directs users to the endpoint that offers the **lowest network latency** from the client's perspective. It maintains an internal Internet Latency Table that tracks the round-trip time between different IP address ranges and Azure data centers. When a DNS query arrives, Traffic Manager determines the approximate source location of the query (based on the recursive DNS server's IP) and responds with the endpoint closest in terms of network latency.
* **Use Cases**:
    * **Global Applications**: Improving the responsiveness of globally distributed applications by ensuring users connect to the instance nearest to them, minimizing network travel time.
    * **Content Delivery**: For websites or services where fast content loading is critical, regardless of the user's geographical location (as "closest" is based on network latency, not just geographic distance).
* **Benefit**: Optimizes user experience by providing the fastest possible connection based on network performance.

---

## 4. Geographic Routing Method üó∫Ô∏è

* **How it works**: You map specific **geographic regions** (e.g., continents, countries/regions, or even states/provinces in some cases) to specific endpoints. When a DNS query comes in, Traffic Manager identifies the geographic origin of the query (based on the recursive DNS server's IP address) and routes the user to the endpoint explicitly assigned to that region. You can also define a "fallback" endpoint for unmapped regions or use nested profiles.
* **Use Cases**:
    * **Data Sovereignty/Compliance**: Ensuring that users from a specific country or region always access data stored within that region to comply with regulations (e.g., GDPR).
    * **Localized Content**: Directing users to a version of your application that provides content, language, or services tailored to their specific geographic location.
    * **Geo-fencing**: Restricting access to certain content or services based on the user's geographic origin.
* **Benefit**: Provides precise control over traffic routing based on the user's actual geographic location, important for compliance and localized experiences.

---

### Other Routing Methods (Briefly)

While the prompt focuses on the four main methods, Azure Traffic Manager also offers:

* **Multivalue Routing Method**: Returns multiple healthy IPv4/IPv6 addresses for an endpoint. This allows clients to try each IP address until one responds, offering client-side redundancy without needing another DNS query. Useful for applications that can handle multiple IP responses (e.g., some database clients).
* **Subnet Routing Method**: Allows you to map specific end-user IP address ranges (CIDR blocks) to specific endpoints. This is highly granular and can be used for very specific routing needs, such as directing corporate network users to an internal endpoint while external users go to a public one.

Traffic Manager's flexibility in routing methods makes it a powerful tool for managing global application traffic and ensuring high availability and performance.