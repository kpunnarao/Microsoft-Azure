# Lab: Azure CLI (Command Line Interface) Basics üöÄ

Of course! Here's an introduction you can add to the "Azure CLI (Command Line Interface) Basics" lab document.

---

# Day 3 Lab: Azure CLI (Command Line Interface) Basics üöÄ

## Introduction to Azure CLI

While the Azure Portal provides a powerful and intuitive graphical interface for managing your cloud resources, there are many scenarios where a command-line interface offers greater efficiency, speed, and automation capabilities. 

This is where the **Azure Command-Line Interface (CLI)** comes in.

The Azure CLI is a **cross-platform command-line tool** that allows you to connect to Azure and execute administrative commands on Azure resources. 

Whether you're running on Windows, macOS, or Linux, the Azure CLI provides a consistent way to interact with your Azure environment. 

It's particularly favored by developers and administrators who prefer scripting, automating tasks, or integrating Azure operations into their continuous integration/continuous deployment (CI/CD) pipelines.

In this lab, you'll learn how to set up the Azure CLI on your local machine, authenticate it to your Azure account, and start performing basic operations, laying the groundwork for more advanced Azure management and automation.

You're ready to get hands-on with the Azure CLI\! This is an excellent next step for anyone looking to automate Azure tasks and manage resources more efficiently than through the portal alone.

-----

This lab will guide you through installing, configuring, and executing basic commands using the Azure Command-Line Interface (CLI) on different operating systems.

## Lab Scenario üè∞

You need to set up the Azure CLI on your local machine to manage Azure resources programmatically. This lab will cover:

  * **Installing Azure CLI** on Windows, macOS, and Linux.
  * **Configuring** your Azure CLI for first use.
  * Executing some **basic commands** to interact with your Azure subscription.

-----

## Part 1: Installing Azure CLI

Choose the installation method for your operating system.

### 1.1 Installation on Windows ü™ü

The easiest way to install Azure CLI on Windows is using the Microsoft Installer (MSI).

1.  **Download the MSI Installer**:

      * Go to the official Microsoft Learn page for Azure CLI installation: [https://learn.microsoft.com/en-us/cli/azure/install-azure-cli-windows](https://learn.microsoft.com/en-us/cli/azure/install-azure-cli-windows)
      * Download the latest 64-bit MSI installer directly from the page.

2.  **Run the Installer**:

      * Locate the downloaded `.msi` file and double-click it.
      * Follow the prompts in the installation wizard. Accept the license agreement, choose the installation location (default is usually fine), and click "Install".
      * The installer will handle adding Azure CLI to your system's PATH environment variable.

3.  **Verify Installation**:

      * Open a **new** Command Prompt or PowerShell window (existing windows might not have the updated PATH).
      * Type `az --version` and press Enter.
      * You should see output similar to this, indicating the installed version:
        ```
        azure-cli                          2.x.x
        ...
        ```

-----

### 1.2 Installation on macOS üçé

On macOS, the recommended way to install Azure CLI is using **Homebrew**, the popular package manager.

1.  **Install Homebrew (if not already installed)**:

      * Open your Terminal application.
      * Paste the following command and press Enter:
        ```bash
        /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
        ```
      * Follow the on-screen instructions, which might include entering your user password.

2.  **Install Azure CLI with Homebrew**:

      * Once Homebrew is installed, update your Homebrew repositories and then install Azure CLI:
        ```bash
        brew update && brew install azure-cli
        ```
      * This command will download and install the Azure CLI package and its dependencies.

3.  **Verify Installation**:

      * After the installation completes, type `az --version` in your Terminal and press Enter.
      * You should see output similar to this:
        ```
        azure-cli                          2.x.x
        ...
        ```
      * For tab completion in Zsh, you might need to add specific lines to your `.zshrc` file as per Homebrew's instructions.

-----

### 1.3 Installation on Linux üêß

Installation on Linux varies slightly depending on your distribution. The recommended method is via your distribution's package manager. Here are examples for Ubuntu/Debian (using `apt`) and RHEL/CentOS (using `dnf`/`yum`).

#### For Ubuntu/Debian (using `apt`):

1.  **Install prerequisites**:
    ```bash
    sudo apt-get update
    sudo apt-get install ca-certificates curl apt-transport-https lsb-release gnupg
    ```
2.  **Download and install the Microsoft signing key**:
    ```bash
    sudo mkdir -p /etc/apt/keyrings
    curl -sL https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor | sudo tee /etc/apt/keyrings/microsoft.gpg > /dev/null
    ```
3.  **Add the Azure CLI software repository**:
    ```bash
    AZ_REPO=$(lsb_release -cs)
    echo "deb [arch=amd64 signed-by=/etc/apt/keyrings/microsoft.gpg] https://packages.microsoft.com/repos/azure-cli/ $AZ_REPO main" | sudo tee /etc/apt/sources.list.d/azure-cli.list
    ```
4.  **Install Azure CLI**:
    ```bash
    sudo apt-get update
    sudo apt-get install azure-cli
    ```
5.  **Verify Installation**:
    ```bash
    az --version
    ```

#### For RHEL/CentOS/Fedora (using `dnf` or `yum`):

1.  **Import the Microsoft GPG key**:
    ```bash
    sudo rpm --import https://packages.microsoft.com/keys/microsoft.asc
    ```
2.  **Add the Azure CLI repository (example for RHEL 9/CentOS Stream 9)**:
    ```bash
    sudo dnf install -y https://packages.microsoft.com/config/rhel/9.0/packages-microsoft-prod.rpm
    # For older RHEL/CentOS versions, adjust the URL (e.g., /rhel/8.0/ or /rhel/7.0/)
    ```
3.  **Install Azure CLI**:
    ```bash
    sudo dnf install azure-cli # Use `sudo yum install azure-cli` for older RHEL/CentOS
    ```
4.  **Verify Installation**:
    ```bash
    az --version
    ```

-----

## Part 2: Configuring and Logging In to Azure CLI

Once installed, you need to log in to your Azure account to allow the CLI to manage your resources.

### 2.1 Logging In üîë

1.  **Open your terminal/command prompt**.
2.  Type the following command and press Enter:
    ```bash
    az login
    ```
3.  **Browser-Based Authentication**:
      * This command will open your default web browser and navigate to a Microsoft login page.
      * Sign in with your Azure account credentials (the same account you use for the Azure Portal).
      * If you have multiple accounts or are already logged in to a different account, ensure you select the correct one.
      * Once authentication is complete in the browser, you'll see a success message, and your terminal will display information about your default subscription.
4.  **Device Code Flow (if browser doesn't open)**:
      * If `az login` can't open a browser (e.g., on a headless server), it will provide a URL and a device code.
      * You'll need to open a web browser on another device, go to the provided URL (e.g., `https://microsoft.com/devicelogin`), and enter the device code.

### 2.2 Verifying Current Account and Subscription üìã

After logging in, you can verify which account and subscription are currently active.

1.  To show details of the currently active subscription:

    ```bash
    az account show
    ```

    This will output JSON data with details like your subscription ID, name, tenant ID, and user information.

2.  To list all subscriptions associated with your account:

    ```bash
    az account list --output table
    ```

    The `--output table` parameter is used here to display the information in a human-readable table format, which is very useful for lists. Look for the `IsDefault` column to see which subscription is currently active.

3.  **Setting a Default Subscription (if you have multiple)**:
    If you have multiple subscriptions and want to work with a specific one, you can set it as the default for your CLI sessions:

    ```bash
    az account set --subscription "Your Subscription Name or ID"
    ```

    Replace `"Your Subscription Name or ID"` with the actual name or ID of the subscription you want to use.

-----

## Part 3: Basic Azure CLI Commands

Now that you're logged in, let's try some fundamental commands.

### 3.1 Managing Resource Groups üìÅ

Resource groups are fundamental for organizing your Azure resources.

1.  **List all resource groups**:

    ```bash
    az group list --output table
    ```

    This command lists all resource groups in your currently active subscription.

2.  **Create a new resource group**:

    ```bash
    az group create --name MyCliResourceGroup --location eastus
    ```

      * `--name`: Specifies the name for your new resource group (e.g., `MyCliResourceGroup`).
      * `--location`: Specifies the Azure region where the resource group's metadata will be stored (e.g., `eastus`).

3.  **Show details of a specific resource group**:

    ```bash
    az group show --name MyCliResourceGroup
    ```

    This will output detailed JSON information about the `MyCliResourceGroup`.

### 3.2 Listing Resources üì¶

You can list various resources within your subscription or a specific resource group.

1.  **List all resources in your subscription**:

    ```bash
    az resource list --output table
    ```

    This can be a very long list\!

2.  **List resources within a specific resource group**:

    ```bash
    az resource list --resource-group MyCliResourceGroup --output table
    ```

    Initially, this will likely be empty since you just created the resource group.

### 3.3 Getting Help ‚ùì

The Azure CLI has built-in help for all commands.

1.  **Get help for a command group**:

    ```bash
    az group --help
    ```

    This will show you all available commands under the `az group` command group (e.g., `create`, `delete`, `list`, `show`).

2.  **Get help for a specific command**:

    ```bash
    az group create --help
    ```

    This provides detailed information about the `az group create` command, including its parameters, examples, and usage.

### 3.4 Cleaning Up (Optional) üßπ

If you want to remove the resource group you created:

1.  **Delete a resource group**:
    ```bash
    az group delete --name MyCliResourceGroup --no-wait --yes
    ```
      * `--no-wait`: Tells the command not to wait for the deletion to complete.
      * `--yes`: Confirms the deletion without a prompt (use with caution\!).
      * **Caution**: Deleting a resource group will delete ALL resources contained within it. Ensure you want to delete everything before running this command.

-----

This lab has provided you with the essential steps to get started with Azure CLI. As you continue to use Azure, you'll find the CLI an indispensable tool for automation, scripting, and efficient resource management.

---

